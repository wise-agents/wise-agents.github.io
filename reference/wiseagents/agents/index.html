<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>agents - wise-agents Docs</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "agents";
        var mkdocs_page_input_path = "reference/wiseagents/agents/index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> wise-agents Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../multi_agents/">What are AI Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../wise_agents_architecture/">Wise Agents architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../contributing/">How to contribute</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Details</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../rag_architecture/">RAG Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../using_cli/">Using CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../declare_agents/">Declare agents in YAML</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../custom_agents/">How To Create Custom Agents</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../agentic_chatbot/">Agentic chatbot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../sequential_coordinator_example/">Sequential Coordinator Example</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="../">wiseagents</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">agents</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="assistant/">assistant</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="coordinator_wise_agents/">coordinator_wise_agents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="rag_wise_agents/">rag_wise_agents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="utility_wise_agents/">utility_wise_agents</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cli/">cli</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../cli/wise_agent_cli/">wise_agent_cli</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../constants/">constants</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../core/">core</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../graphdb/">graphdb</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../graphdb/lang_chain_wise_agent_graph_db/">lang_chain_wise_agent_graph_db</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../graphdb/wise_agent_graph_db/">wise_agent_graph_db</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../llm/">llm</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../llm/openai_API_wise_agent_LLM/">openai_API_wise_agent_LLM</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../llm/wise_agent_LLM/">wise_agent_LLM</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../llm/wise_agent_remote_LLM/">wise_agent_remote_LLM</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../transports/">transports</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../transports/stomp/">stomp</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../vectordb/">vectordb</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../vectordb/lang_chain_wise_agent_vector_db/">lang_chain_wise_agent_vector_db</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../vectordb/wise_agent_vector_db/">wise_agent_vector_db</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../wise_agent_messaging/">wise_agent_messaging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../yaml/">yaml</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../yaml/wise_yaml_loader/">wise_yaml_loader</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../yaml/yaml_utils/">yaml_utils</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../community/">Community</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../contributing_lnk/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">wise-agents Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Reference</li>
          <li class="breadcrumb-item"><a href="../">wiseagents</a></li>
      <li class="breadcrumb-item active">agents</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">



<a id="wiseagents.agents"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.AssistantAgent" class="doc doc-heading">
            <code>AssistantAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This utility agent start a web interface and pass the user input to another agent.
The web interface will be running at http://127.0.0.1:7860</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AssistantAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This utility agent start a web interface and pass the user input to another agent.</span>
<span class="sd">    The web interface will be running at http://127.0.0.1:7860</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.AssistantAgent&#39;</span>

    <span class="n">_response_delivery</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_cond</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">()</span>
    <span class="n">_response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_chat_id</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
                 <span class="n">destination_agent_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            destination_agent_name (str): the name of the agent to send requests to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="n">destination_agent_name</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">            description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">            destination_agent_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">            response_delivery=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">start_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">start_agent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set_collaboration_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span>
                                                                                  <span class="n">WiseAgentCollaborationType</span><span class="o">.</span><span class="n">CHAT</span><span class="p">)</span>
        <span class="n">gradio</span><span class="o">.</span><span class="n">ChatInterface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slow_echo</span><span class="p">)</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">prevent_thread_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slow_echo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">history</span><span class="p">):</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response</span><span class="o">.</span><span class="n">message</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                        <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by just passing it to another agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">            no string response yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AssistantAgent: process_request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a response message just sending it back to the client.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AssistantAgent: process_response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="n">response</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="o">.</span><span class="n">notify</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent to send requests to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the function to deliver the response to the client.</span>
<span class="sd">        return (Callable[[], WiseAgentMessage]): the function to deliver the response to the client&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the function to deliver the response to the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.AssistantAgent.destination_agent_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">destination_agent_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent to send requests to.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.AssistantAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.AssistantAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.
return (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">destination_agent_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>destination_agent_name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent to send requests to</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
             <span class="n">destination_agent_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        destination_agent_name (str): the name of the agent to send requests to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="n">destination_agent_name</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">        description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">        destination_agent_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">        response_delivery=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by just passing it to another agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.wise_agent_messaging.WiseAgentMessage" href="../wise_agent_messaging/#wiseagents.wise_agent_messaging.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>Optional[str]: the response to the request message as a string or None if there is</p>
              </div>
            </li>
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>no string response yet</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                    <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by just passing it to another agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">        no string response yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AssistantAgent: process_request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chat_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message just sending it back to the client.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process a response message just sending it back to the client.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AssistantAgent: process_response: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response</span> <span class="o">=</span> <span class="n">response</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cond</span><span class="o">.</span><span class="n">notify</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response_delivery</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[], <a class="autorefs autorefs-internal" title="wiseagents.wise_agent_messaging.WiseAgentMessage" href="../wise_agent_messaging/#wiseagents.wise_agent_messaging.WiseAgentMessage">WiseAgentMessage</a>]</code>)
              –
              <div class="doc-md-description">
                <p>the function to deliver the response to the client</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the function to deliver the response to the client.</span>

<span class="sd">    Args:</span>
<span class="sd">        response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.AssistantAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/assistant.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.BaseCoVeChallengerWiseAgent" class="doc doc-heading">
            <code>BaseCoVeChallengerWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This abstract agent implementation is used to challenge the response from a RAG or Graph RAG agent
using the Chain-of-Verification (CoVe) method (https://arxiv.org/pdf/2309.11495) to try to prevent
hallucinations.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseCoVeChallengerWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This abstract agent implementation is used to challenge the response from a RAG or Graph RAG agent</span>
<span class="sd">    using the Chain-of-Verification (CoVe) method (https://arxiv.org/pdf/2309.11495) to try to prevent</span>
<span class="sd">    hallucinations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.BaseCoVeChallengerWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
                 <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
                 <span class="n">num_verification_questions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span>
                 <span class="n">vector_db</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WiseAgentVectorDB</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
                 <span class="n">graph_db</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WiseAgentGraphDB</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            k Optional(int): the number of documents to retrieve from the vector database, defaults to 4</span>
<span class="sd">            num_verification_questions Optional(int): the number of verification questions to generate, defaults to 4</span>
<span class="sd">            vector_db (Optional[WiseAgentVectorDB]): the vector DB associated with the agent (to be used for challenging RAG results)</span>
<span class="sd">            collection_name (Optional[str]) = &quot;wise-agent-collection&quot;: the vector DB collection name associated with the agent</span>
<span class="sd">            graph_db (Optional[WiseAgentGraphDB]): the graph DB associated with the agent (to be used for challenging Graph RAG results)</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">num_verification_questions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="n">graph_db</span>
        <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                         <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">graph_db</span><span class="o">=</span><span class="n">graph_db</span><span class="p">,</span>
                         <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">, num_verification_questions=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;graph_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                        <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a message containing a question and a baseline response to the question</span>
<span class="sd">        by challenging the baseline response to generate a revised response to the original question.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the response to the request message as a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of documents to retrieve.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">num_verification_questions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of verification questions to generate.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span>

    <span class="k">def</span> <span class="nf">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                                         <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create prompts to challenge the baseline response to a question to try to generate a revised response</span>
<span class="sd">        to the original question.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (str): the message containing the question and baseline response</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># plan verifications, taking into account the baseline response and conversation history</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Given the following question and baseline response, generate a list of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num_verification_questions</span><span class="si">}</span><span class="s2"> &quot;</span>
                  <span class="sa">f</span><span class="s2">&quot; verification questions that could help determine if there are any mistakes in the baseline response:&quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;Your response should contain only the list of questions, one per line.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># execute verifications, answering questions independently, without the baseline response</span>
        <span class="n">verification_questions</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">verification_responses</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">question</span> <span class="ow">in</span> <span class="n">verification_questions</span><span class="p">:</span>
            <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_documents</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
            <span class="n">llm_response</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                                          <span class="p">[],</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
            <span class="n">verification_responses</span> <span class="o">=</span> <span class="p">(</span><span class="n">verification_responses</span> <span class="o">+</span> <span class="s2">&quot;Verification Question: &quot;</span> <span class="o">+</span> <span class="n">question</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                                      <span class="o">+</span> <span class="s2">&quot;Verification Result: &quot;</span> <span class="o">+</span> <span class="n">llm_response</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># generate the final revised response, conditioned on the baseline response and verification results</span>
        <span class="n">complete_info</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">verification_responses</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Given the following question, baseline response, and a list of verification questions and results,&quot;</span>
                  <span class="sa">f</span><span class="s2">&quot; generate a revised response incorporating the verification results:</span><span class="se">\n</span><span class="si">{</span><span class="n">complete_info</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;Your response must contain only the revised response to the question in the JSON format shown below:</span><span class="se">\n</span><span class="s2">&quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">&#39;revised&#39;: &#39;Your revised response to the question.&#39;</span><span class="se">}}\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve documents to be used as the context for a RAG or Graph RAG prompt.</span>

<span class="sd">        Args:</span>
<span class="sd">            question (str): the question to be used to retrieve the documents</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Document]: the list of documents retrieved for the question</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.k" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">k</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the number of documents to retrieve.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.num_verification_questions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">num_verification_questions</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the number of verification questions to generate.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">num_verification_questions</span><span class="o">=</span><span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span> <span class="n">vector_db</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span> <span class="n">graph_db</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM agent to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>k</code></b>
                  (<code>Optional(int</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS">DEFAULT_NUM_DOCUMENTS</a></code>
)
              –
              <div class="doc-md-description">
                <p>the number of documents to retrieve from the vector database, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>num_verification_questions</code></b>
                  (<code>Optional(int</code>, default:
                      <code><span title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_VERIFICATION_QUESTIONS">DEFAULT_NUM_VERIFICATION_QUESTIONS</span></code>
)
              –
              <div class="doc-md-description">
                <p>the number of verification questions to generate, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>vector_db</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="wiseagents.vectordb.WiseAgentVectorDB" href="../vectordb/#wiseagents.vectordb.WiseAgentVectorDB">WiseAgentVectorDB</a>]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the vector DB associated with the agent (to be used for challenging RAG results)</p>
              </div>
            </li>
            <li>
              <b><code>collection_name</code></b>
                  (<code>Optional[str]) = &#34;wise-agent-collection&#34;</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME">DEFAULT_COLLECTION_NAME</a></code>
)
              –
              <div class="doc-md-description">
                <p>the vector DB collection name associated with the agent</p>
              </div>
            </li>
            <li>
              <b><code>graph_db</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="wiseagents.graphdb.WiseAgentGraphDB" href="../graphdb/#wiseagents.graphdb.WiseAgentGraphDB">WiseAgentGraphDB</a>]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the graph DB associated with the agent (to be used for challenging Graph RAG results)</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
             <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
             <span class="n">num_verification_questions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span>
             <span class="n">vector_db</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WiseAgentVectorDB</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
             <span class="n">graph_db</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WiseAgentGraphDB</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        k Optional(int): the number of documents to retrieve from the vector database, defaults to 4</span>
<span class="sd">        num_verification_questions Optional(int): the number of verification questions to generate, defaults to 4</span>
<span class="sd">        vector_db (Optional[WiseAgentVectorDB]): the vector DB associated with the agent (to be used for challenging RAG results)</span>
<span class="sd">        collection_name (Optional[str]) = &quot;wise-agent-collection&quot;: the vector DB collection name associated with the agent</span>
<span class="sd">        graph_db (Optional[WiseAgentGraphDB]): the graph DB associated with the agent (to be used for challenging Graph RAG results)</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">num_verification_questions</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="n">graph_db</span>
    <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                     <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">graph_db</span><span class="o">=</span><span class="n">graph_db</span><span class="p">,</span>
                     <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">, num_verification_questions=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;graph_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.create_and_process_chain_of_verification_prompts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create prompts to challenge the baseline response to a question to try to generate a revised response
to the original question.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>message</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the message containing the question and baseline response</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                                     <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create prompts to challenge the baseline response to a question to try to generate a revised response</span>
<span class="sd">    to the original question.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (str): the message containing the question and baseline response</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># plan verifications, taking into account the baseline response and conversation history</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Given the following question and baseline response, generate a list of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num_verification_questions</span><span class="si">}</span><span class="s2"> &quot;</span>
              <span class="sa">f</span><span class="s2">&quot; verification questions that could help determine if there are any mistakes in the baseline response:&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;Your response should contain only the list of questions, one per line.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>

    <span class="c1"># execute verifications, answering questions independently, without the baseline response</span>
    <span class="n">verification_questions</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">verification_responses</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">question</span> <span class="ow">in</span> <span class="n">verification_questions</span><span class="p">:</span>
        <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_documents</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                                      <span class="p">[],</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
        <span class="n">verification_responses</span> <span class="o">=</span> <span class="p">(</span><span class="n">verification_responses</span> <span class="o">+</span> <span class="s2">&quot;Verification Question: &quot;</span> <span class="o">+</span> <span class="n">question</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                                  <span class="o">+</span> <span class="s2">&quot;Verification Result: &quot;</span> <span class="o">+</span> <span class="n">llm_response</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># generate the final revised response, conditioned on the baseline response and verification results</span>
    <span class="n">complete_info</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">verification_responses</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Given the following question, baseline response, and a list of verification questions and results,&quot;</span>
              <span class="sa">f</span><span class="s2">&quot; generate a revised response incorporating the verification results:</span><span class="se">\n</span><span class="si">{</span><span class="n">complete_info</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;Your response must contain only the revised response to the question in the JSON format shown below:</span><span class="se">\n</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">&#39;revised&#39;: &#39;Your revised response to the question.&#39;</span><span class="se">}}\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">return</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a message containing a question and a baseline response to the question
by challenging the baseline response to generate a revised response to the original question.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>str</code></b>(                  <code><span title="typing.Optional">Optional</span>[str]</code>
)              –
              <div class="doc-md-description">
                <p>the response to the request message as a string</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                    <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a message containing a question and a baseline response to the question</span>
<span class="sd">    by challenging the baseline response to generate a revised response to the original question.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the response to the request message as a string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.retrieve_documents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">retrieve_documents</span><span class="p">(</span><span class="n">question</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Retrieve documents to be used as the context for a RAG or Graph RAG prompt.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>question</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the question to be used to retrieve the documents</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="wiseagents.vectordb.Document" href="../vectordb/#wiseagents.vectordb.Document">Document</a>]</code>
              –
              <div class="doc-md-description">
                <p>List[Document]: the list of documents retrieved for the question</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">retrieve_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve documents to be used as the context for a RAG or Graph RAG prompt.</span>

<span class="sd">    Args:</span>
<span class="sd">        question (str): the question to be used to retrieve the documents</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Document]: the list of documents retrieved for the question</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.BaseCoVeChallengerWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.CoVeChallengerRAGWiseAgent" class="doc doc-heading">
            <code>CoVeChallengerRAGWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.BaseCoVeChallengerWiseAgent" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.BaseCoVeChallengerWiseAgent">BaseCoVeChallengerWiseAgent</a></code></p>


        <p>This agent implementation is used to challenge the response from a RAG agent using the
Chain-of-Verification (CoVe) method (https://arxiv.org/pdf/2309.11495) to try to prevent
hallucinations.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CoVeChallengerRAGWiseAgent</span><span class="p">(</span><span class="n">BaseCoVeChallengerWiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent implementation is used to challenge the response from a RAG agent using the</span>
<span class="sd">    Chain-of-Verification (CoVe) method (https://arxiv.org/pdf/2309.11495) to try to prevent</span>
<span class="sd">    hallucinations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.CoVeChallengerRAGWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">:</span> <span class="n">WiseAgentVectorDB</span><span class="p">,</span>
                 <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
                 <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
                 <span class="n">num_verification_questions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span>
                 <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">            vector_db (WiseAgentVectorDB): the vector database to use for retrieving documents</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            collection_name (Optional[str]): the name of the collection to use in the vector database, defaults to wise-agents-collection</span>
<span class="sd">            k (Optional[int]): the number of documents to retrieve from the vector database, defaults to 4</span>
<span class="sd">            num_verification_questions (Optional[int]): the number of verification questions to generate, defaults to 4</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">num_verification_questions</span>
        <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                         <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">,</span> <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span>
                         <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">num_verification_questions</span><span class="o">=</span><span class="n">num_verification_questions</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">, k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;num_verification_questions=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a message containing a question and a baseline response to the question</span>
<span class="sd">        by challenging the baseline response to generate a revised response to the original question.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the response to the request message as a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">llm_response</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">retrieve_documents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">retrieve_documents_for_rag</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">num_verification_questions</span><span class="o">=</span><span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM agent to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>vector_db</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.vectordb.WiseAgentVectorDB" href="../vectordb/#wiseagents.vectordb.WiseAgentVectorDB">WiseAgentVectorDB</a></code>)
              –
              <div class="doc-md-description">
                <p>the vector database to use for retrieving documents</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>collection_name</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME">DEFAULT_COLLECTION_NAME</a></code>
)
              –
              <div class="doc-md-description">
                <p>the name of the collection to use in the vector database, defaults to wise-agents-collection</p>
              </div>
            </li>
            <li>
              <b><code>k</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS">DEFAULT_NUM_DOCUMENTS</a></code>
)
              –
              <div class="doc-md-description">
                <p>the number of documents to retrieve from the vector database, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>num_verification_questions</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><span title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_VERIFICATION_QUESTIONS">DEFAULT_NUM_VERIFICATION_QUESTIONS</span></code>
)
              –
              <div class="doc-md-description">
                <p>the number of verification questions to generate, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">:</span> <span class="n">WiseAgentVectorDB</span><span class="p">,</span>
             <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
             <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
             <span class="n">num_verification_questions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span><span class="p">,</span>
             <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">        vector_db (WiseAgentVectorDB): the vector database to use for retrieving documents</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        collection_name (Optional[str]): the name of the collection to use in the vector database, defaults to wise-agents-collection</span>
<span class="sd">        k (Optional[int]): the number of documents to retrieve from the vector database, defaults to 4</span>
<span class="sd">        num_verification_questions (Optional[int]): the number of verification questions to generate, defaults to 4</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">num_verification_questions</span>
    <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                     <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">,</span> <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span>
                     <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">num_verification_questions</span><span class="o">=</span><span class="n">num_verification_questions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_num_verification_questions</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_VERIFICATION_QUESTIONS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">, k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;num_verification_questions=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_verification_questions</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a message containing a question and a baseline response to the question
by challenging the baseline response to generate a revised response to the original question.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>str</code></b>(                  <code><span title="typing.Optional">Optional</span>[str]</code>
)              –
              <div class="doc-md-description">
                <p>the response to the request message as a string</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a message containing a question and a baseline response to the question</span>
<span class="sd">    by challenging the baseline response to generate a revised response to the original question.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the response to the request message as a string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_and_process_chain_of_verification_prompts</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">llm_response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.CoVeChallengerRAGWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.GraphRAGWiseAgent" class="doc doc-heading">
            <code>GraphRAGWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent implementation makes use of Graph Retrieval Augmented Generation (Graph RAG) to answer questions.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">GraphRAGWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent implementation makes use of Graph Retrieval Augmented Generation (Graph RAG) to answer questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.GraphRAGWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_retrieval_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_metadata_filter</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">graph_db</span><span class="p">:</span> <span class="n">WiseAgentGraphDB</span><span class="p">,</span>
                 <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
                 <span class="n">include_sources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span>
                 <span class="n">retrieval_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">metadata_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM to use for processing requests</span>
<span class="sd">            graph_db (WiseAgentGraphDB): the graph database to use for retrieving documents</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            k (Optional[int]): the number of documents to retrieve for each query, defaults to 4</span>
<span class="sd">            include_sources Optional(bool): whether to include the sources of the documents that were consulted to</span>
<span class="sd">            produce the response, defaults to False</span>
<span class="sd">            retrieval_query (Optional[str]): the optional retrieval query to use to obtain sub-graphs connected to nodes</span>
<span class="sd">            retrieved from a similarity search</span>
<span class="sd">            params (Optional[Dict[str, Any]]): the optional parameters for the query</span>
<span class="sd">            metadata_filter (Optional[Dict[str, Any]]): the optional metadata filter to use with similarity search</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="n">graph_db</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">include_sources</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_retrieval_query</span> <span class="o">=</span> <span class="n">retrieval_query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="n">params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_filter</span> <span class="o">=</span> <span class="n">metadata_filter</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
                         <span class="n">graph_db</span><span class="o">=</span><span class="n">graph_db</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;graph_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;include_sources=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="si">}</span><span class="s2">), retrieval_query=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">retrieval_query</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;params=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="si">}</span><span class="s2">, metadata_filter=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_filter</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the RAG agent and sending the response back to the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">            no string response yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="n">retrieve_documents_for_graph_rag</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
                                                               <span class="bp">self</span><span class="o">.</span><span class="n">retrieval_query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_filter</span><span class="p">)</span>
        <span class="n">llm_response_with_sources</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="p">,</span>
                                                                   <span class="n">conversation_history</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">llm_response_with_sources</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of documents to retrieve for each query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">include_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to include the sources of the documents that were consulted to produce the response.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">retrieval_query</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Cypher query to use to obtain sub-graphs connected to nodes retrieved from a similarity search.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_retrieval_query</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the optional parameters for the query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">metadata_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the optional metadata filter to use with similarity search.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_filter</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.include_sources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">include_sources</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get whether to include the sources of the documents that were consulted to produce the response.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.k" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">k</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the number of documents to retrieve for each query.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.metadata_filter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">metadata_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the optional metadata filter to use with similarity search.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.params" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the optional parameters for the query.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.GraphRAGWiseAgent.retrieval_query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">retrieval_query</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the Cypher query to use to obtain sub-graphs connected to nodes retrieved from a similarity search.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">graph_db</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">include_sources</span><span class="o">=</span><span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span> <span class="n">retrieval_query</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>graph_db</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.graphdb.WiseAgentGraphDB" href="../graphdb/#wiseagents.graphdb.WiseAgentGraphDB">WiseAgentGraphDB</a></code>)
              –
              <div class="doc-md-description">
                <p>the graph database to use for retrieving documents</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>k</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS">DEFAULT_NUM_DOCUMENTS</a></code>
)
              –
              <div class="doc-md-description">
                <p>the number of documents to retrieve for each query, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>include_sources</code></b>
                  (<code>Optional(bool</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_INCLUDE_SOURCES" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_INCLUDE_SOURCES">DEFAULT_INCLUDE_SOURCES</a></code>
)
              –
              <div class="doc-md-description">
                <p>whether to include the sources of the documents that were consulted to</p>
              </div>
            </li>
            <li>
              <b><code>retrieval_query</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>&#39;&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>the optional retrieval query to use to obtain sub-graphs connected to nodes</p>
              </div>
            </li>
            <li>
              <b><code>params</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional parameters for the query</p>
              </div>
            </li>
            <li>
              <b><code>metadata_filter</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional metadata filter to use with similarity search</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">graph_db</span><span class="p">:</span> <span class="n">WiseAgentGraphDB</span><span class="p">,</span>
             <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span>
             <span class="n">include_sources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span>
             <span class="n">retrieval_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">metadata_filter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM to use for processing requests</span>
<span class="sd">        graph_db (WiseAgentGraphDB): the graph database to use for retrieving documents</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        k (Optional[int]): the number of documents to retrieve for each query, defaults to 4</span>
<span class="sd">        include_sources Optional(bool): whether to include the sources of the documents that were consulted to</span>
<span class="sd">        produce the response, defaults to False</span>
<span class="sd">        retrieval_query (Optional[str]): the optional retrieval query to use to obtain sub-graphs connected to nodes</span>
<span class="sd">        retrieved from a similarity search</span>
<span class="sd">        params (Optional[Dict[str, Any]]): the optional parameters for the query</span>
<span class="sd">        metadata_filter (Optional[Dict[str, Any]]): the optional metadata filter to use with similarity search</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_graph_db</span> <span class="o">=</span> <span class="n">graph_db</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">include_sources</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_retrieval_query</span> <span class="o">=</span> <span class="n">retrieval_query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="n">params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_filter</span> <span class="o">=</span> <span class="n">metadata_filter</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
                     <span class="n">graph_db</span><span class="o">=</span><span class="n">graph_db</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_retrieval_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_metadata_filter</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;graph_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;include_sources=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="si">}</span><span class="s2">), retrieval_query=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">retrieval_query</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;params=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="si">}</span><span class="s2">, metadata_filter=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_filter</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the RAG agent and sending the response back to the client.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>Optional[str]: the response to the request message as a string or None if there is</p>
              </div>
            </li>
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>no string response yet</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the RAG agent and sending the response back to the client.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">        no string response yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="n">retrieve_documents_for_graph_rag</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
                                                           <span class="bp">self</span><span class="o">.</span><span class="n">retrieval_query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_filter</span><span class="p">)</span>
    <span class="n">llm_response_with_sources</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="p">,</span>
                                                               <span class="n">conversation_history</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">llm_response_with_sources</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.GraphRAGWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.LLMOnlyWiseAgent" class="doc doc-heading">
            <code>LLMOnlyWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This utility agent simply passes a request that it receives to an LLM for processing and returns the
response received from the LLM.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LLMOnlyWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This utility agent simply passes a request that it receives to an LLM for processing and returns the</span>
<span class="sd">    response received from the LLM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.LLMOnlyWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span> <span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
                 <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                         <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the LLM.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">            no string response yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.LLMOnlyWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM agent to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span> <span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
             <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span>
                     <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the LLM.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>Optional[str]: the response to the request message as a string or None if there is</p>
              </div>
            </li>
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>no string response yet</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the LLM.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">        no string response yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">conversation_history</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">return</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMOnlyWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.LLMWiseAgentWithTools" class="doc doc-heading">
            <code>LLMWiseAgentWithTools</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This utility agent makes use of an LLM along with tools to process a request and determine the response
to send back to the client.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LLMWiseAgentWithTools</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This utility agent makes use of an LLM along with tools to process a request and determine the response</span>
<span class="sd">    to send back to the client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.LLMWiseAgentWithTools&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span> <span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tools</span> <span class="o">=</span> <span class="n">tools</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the LLM agent.</span>
<span class="sd">        It also invokes tool(s) if required. Tool(s) could be a callback function or another agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">            no string response yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IA Request received: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">chat_id</span><span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>

        <span class="k">for</span> <span class="n">tool</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tools</span><span class="p">:</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">append_available_tool_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span><span class="o">.</span><span class="n">get_tool_OpenAI_format</span><span class="p">())</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">, Tools: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: https://github.com/wise-agents/wise-agents/issues/205</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>

        <span class="c1">##calling tool</span>
        <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
        <span class="n">tool_calls</span> <span class="o">=</span> <span class="n">response_message</span><span class="o">.</span><span class="n">tool_calls</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool calls: </span><span class="si">{</span><span class="n">tool_calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response message: </span><span class="si">{</span><span class="n">response_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Step 2: check if the model wanted to call a function</span>
        <span class="k">if</span> <span class="n">tool_calls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Step 3: call the function</span>
            <span class="c1"># TODO: the JSON response may not always be valid; be sure to handle errors</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="n">response_message</span><span class="p">)</span>  <span class="c1"># extend conversation with assistant&#39;s reply</span>

            <span class="c1"># Step 4: send the info for each function call and function response to the model</span>
            <span class="k">for</span> <span class="n">tool_call</span> <span class="ow">in</span> <span class="n">tool_calls</span><span class="p">:</span>
                <span class="c1">#record the required tool call in the context/chatid</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">append_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">tool_call</span> <span class="ow">in</span> <span class="n">tool_calls</span><span class="p">:</span>
                <span class="n">function_name</span> <span class="o">=</span> <span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span>
                <span class="n">wise_agent_tool</span> <span class="p">:</span> <span class="n">WiseAgentTool</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="n">function_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">wise_agent_tool</span><span class="o">.</span><span class="n">is_agent_tool</span><span class="p">:</span>
                    <span class="c1">#call the agent with correlation ID and complete the chat on response</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
                                                       <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_id</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                                       <span class="n">route_response_to</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">),</span> 
                                      <span class="n">dest_agent_name</span><span class="o">=</span><span class="n">function_name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">function_args</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
                    <span class="n">function_response</span> <span class="o">=</span> <span class="n">wise_agent_tool</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="o">**</span><span class="n">function_args</span><span class="p">)</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function response: </span><span class="si">{</span><span class="n">function_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> 
                        <span class="p">{</span>
                            <span class="s2">&quot;tool_call_id&quot;</span><span class="p">:</span> <span class="n">tool_call</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">function_name</span><span class="p">,</span>
                            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">function_response</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">)</span>  <span class="c1"># extend conversation with function response</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


        <span class="c1">#SEND THE RESPONSE IF NOT ASYNC, OTHERWISE WE WILL DO LATER IN PROCESS_RESPONSE</span>
        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_tool_calls</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c1"># if all tool calls have been completed (no asynch needed)</span>
            <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> 
                                                            <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sending response </span><span class="si">{</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> to: </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response_message</span><span class="o">.</span><span class="n">content</span>


    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a response message and sending the response back to the client.</span>
<span class="sd">        It invoke also the tool if required. Tool could be a callback function or another agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            response (WiseAgentMessage): the response message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response received: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> 
            <span class="p">{</span>
                <span class="s2">&quot;tool_call_id&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">tool_id</span><span class="p">,</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>  <span class="c1"># extend conversation with function response</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_tool_calls</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c1"># if all tool calls have been completed (no asynch needed)</span>
            <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> 
                                                            <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sending response </span><span class="si">{</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> to: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">route_response_to</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">response</span><span class="o">.</span><span class="n">route_response_to</span> <span class="p">)</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.LLMWiseAgentWithTools.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM agent to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span> <span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
             <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="n">llm_agent</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tools</span> <span class="o">=</span> <span class="n">tools</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm_agent</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the LLM agent.
It also invokes tool(s) if required. Tool(s) could be a callback function or another agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>Optional[str]: the response to the request message as a string or None if there is
    no string response yet</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the LLM agent.</span>
<span class="sd">    It also invokes tool(s) if required. Tool(s) could be a callback function or another agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">        no string response yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;IA Request received: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">chat_id</span><span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>

    <span class="k">for</span> <span class="n">tool</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tools</span><span class="p">:</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_available_tool_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span><span class="o">.</span><span class="n">get_tool_OpenAI_format</span><span class="p">())</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">, Tools: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># TODO: https://github.com/wise-agents/wise-agents/issues/205</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>

    <span class="c1">##calling tool</span>
    <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
    <span class="n">tool_calls</span> <span class="o">=</span> <span class="n">response_message</span><span class="o">.</span><span class="n">tool_calls</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool calls: </span><span class="si">{</span><span class="n">tool_calls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response message: </span><span class="si">{</span><span class="n">response_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Step 2: check if the model wanted to call a function</span>
    <span class="k">if</span> <span class="n">tool_calls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Step 3: call the function</span>
        <span class="c1"># TODO: the JSON response may not always be valid; be sure to handle errors</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> <span class="n">response_message</span><span class="p">)</span>  <span class="c1"># extend conversation with assistant&#39;s reply</span>

        <span class="c1"># Step 4: send the info for each function call and function response to the model</span>
        <span class="k">for</span> <span class="n">tool_call</span> <span class="ow">in</span> <span class="n">tool_calls</span><span class="p">:</span>
            <span class="c1">#record the required tool call in the context/chatid</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">append_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">tool_call</span> <span class="ow">in</span> <span class="n">tool_calls</span><span class="p">:</span>
            <span class="n">function_name</span> <span class="o">=</span> <span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span>
            <span class="n">wise_agent_tool</span> <span class="p">:</span> <span class="n">WiseAgentTool</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="n">function_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">wise_agent_tool</span><span class="o">.</span><span class="n">is_agent_tool</span><span class="p">:</span>
                <span class="c1">#call the agent with correlation ID and complete the chat on response</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
                                                   <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_id</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                                   <span class="n">route_response_to</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">),</span> 
                                  <span class="n">dest_agent_name</span><span class="o">=</span><span class="n">function_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">function_args</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
                <span class="n">function_response</span> <span class="o">=</span> <span class="n">wise_agent_tool</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="o">**</span><span class="n">function_args</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Function response: </span><span class="si">{</span><span class="n">function_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> 
                    <span class="p">{</span>
                        <span class="s2">&quot;tool_call_id&quot;</span><span class="p">:</span> <span class="n">tool_call</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">function_name</span><span class="p">,</span>
                        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">function_response</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">)</span>  <span class="c1"># extend conversation with function response</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">tool_call</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


    <span class="c1">#SEND THE RESPONSE IF NOT ASYNC, OTHERWISE WE WILL DO LATER IN PROCESS_RESPONSE</span>
    <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_tool_calls</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c1"># if all tool calls have been completed (no asynch needed)</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> 
                                                        <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>
        <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sending response </span><span class="si">{</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> to: </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response_message</span><span class="o">.</span><span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message and sending the response back to the client.
It invoke also the tool if required. Tool could be a callback function or another agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the response message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span> <span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a response message and sending the response back to the client.</span>
<span class="sd">    It invoke also the tool if required. Tool could be a callback function or another agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        response (WiseAgentMessage): the response message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response received: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span> 
        <span class="p">{</span>
            <span class="s2">&quot;tool_call_id&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">tool_id</span><span class="p">,</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>  <span class="c1"># extend conversation with function response</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_tool_call</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_tool_calls</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c1"># if all tool calls have been completed (no asynch needed)</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> 
                                                        <span class="n">ctx</span><span class="o">.</span><span class="n">get_available_tools_in_chat</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">))</span>
        <span class="n">response_message</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sending response </span><span class="si">{</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> to: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">route_response_to</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">response_message</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">response</span><span class="o">.</span><span class="n">route_response_to</span> <span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.LLMWiseAgentWithTools.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.PassThroughClientAgent" class="doc doc-heading">
            <code>PassThroughClientAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This utility agent simply passes a request that it receives to another agent and sends the
response back to the client.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PassThroughClientAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This utility agent simply passes a request that it receives to another agent and sends the</span>
<span class="sd">    response back to the client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.PassThroughClientAgent&#39;</span>

    <span class="n">_response_delivery</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="s2">&quot;WiseIntelligentAgent&quot;</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
                 <span class="n">destination_agent_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;WiseIntelligentAgent&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            destination_agent_name (str): the name of the agent to send requests to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="n">destination_agent_name</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">            description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">            destination_agent_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">            response_delivery=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                        <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a request message by just passing it to another agent.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process a response message just sending it back to the client.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;############################### Not sending response </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">destination_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent to send requests to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the function to deliver the response to the client.</span>
<span class="sd">        return (Callable[[], WiseAgentMessage]): the function to deliver the response to the client&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the function to deliver the response to the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PassThroughClientAgent.destination_agent_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">destination_agent_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent to send requests to.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PassThroughClientAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PassThroughClientAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.
return (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">destination_agent_name</span><span class="o">=</span><span class="s1">&#39;WiseIntelligentAgent&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>destination_agent_name</code></b>
                  (<code>str</code>, default:
                      <code>&#39;WiseIntelligentAgent&#39;</code>
)
              –
              <div class="doc-md-description">
                <p>the name of the agent to send requests to</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
             <span class="n">destination_agent_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;WiseIntelligentAgent&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        destination_agent_name (str): the name of the agent to send requests to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="n">destination_agent_name</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_destination_agent_name</span> <span class="o">=</span> <span class="s2">&quot;WiseIntelligentAgent&quot;</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">        description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, </span><span class="se">\</span>
<span class="s2">        destination_agent_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">        response_delivery=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by just passing it to another agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span>
                    <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process a request message by just passing it to another agent.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination_agent_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message just sending it back to the client.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process a response message just sending it back to the client.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_delivery</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;############################### Not sending response </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response_delivery</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[], <a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a>]</code>)
              –
              <div class="doc-md-description">
                <p>the function to deliver the response to the client</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the function to deliver the response to the client.</span>

<span class="sd">    Args:</span>
<span class="sd">        response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PassThroughClientAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/utility_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.PhasedCoordinatorWiseAgent" class="doc doc-heading">
            <code>PhasedCoordinatorWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent will coordinate the execution of a group of agents in order to determine the response
to a query. The agents will be executed in phases, where agents within a phase will be executed
in parallel. After the phases have completed, the coordinator may choose to repeat the phases
until it is satisfied with the final response or determines it's not possible to answer the query.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PhasedCoordinatorWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent will coordinate the execution of a group of agents in order to determine the response</span>
<span class="sd">    to a query. The agents will be executed in phases, where agents within a phase will be executed</span>
<span class="sd">    in parallel. After the phases have completed, the coordinator may choose to repeat the phases</span>
<span class="sd">    until it is satisfied with the final response or determines it&#39;s not possible to answer the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.PhasedCoordinatorWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span>
                 <span class="n">phases</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span>
                 <span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            llm (WiseAgentLLM): the LLM to use for coordinating the collaboration</span>
<span class="sd">            phases (Optional[List[str]]): the optional list of phase names, defaults to &quot;Data Collection&quot; and &quot;Data Analysis&quot;</span>
<span class="sd">            max_iterations (Optional[int]): the maximum number of iterations to run the phases, defaults to 5</span>
<span class="sd">            confidence_score_threshold (Optional[int]): the confidence score threshold to determine if the final answer</span>
<span class="sd">            is acceptable, defaults to 85</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the coordinator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span> <span class="k">if</span> <span class="n">phases</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">confidence_score_threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, phases=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="si">}</span><span class="s2">,max_iterations=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">phases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of phases.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the maximum number of iterations.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">confidence_score_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the confidence score threshold.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span>

    <span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by kicking off the collaboration in phases.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_collaboration_type</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">WiseAgentCollaborationType</span><span class="o">.</span><span class="n">PHASED</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

        <span class="c1"># Determine the agents required to answer the query</span>
        <span class="n">agent_selection_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Given the following query and a description of the agents that are available,&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; determine all of the agents that could be required to solve the query.&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; Format the response as a space separated list of agent names and don&#39;t include &quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; Query: &quot;</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;Available agents:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_agent_names_and_descriptions</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_selection_prompt</span><span class="p">})</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="c1"># Assign the agents to phases</span>
        <span class="n">agent_assignment_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Assign each of the agents that will be required to solve the query to one of the following phases:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot;Assume that agents within a phase will be executed in parallel.&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; Format the response as a space separated list of agents for each phase, where the first&quot;</span>
                                   <span class="s2">&quot; line contains the list of agents for the first phase and second line contains the list of&quot;</span>
                                   <span class="s2">&quot; agents for the second phase and so on. Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_assignment_prompt</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>     
        <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()]</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_agent_phase_assignments</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">phases</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="c1"># Kick off the first phase</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                               <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a response message. If this message is from the last agent remaining in the current phase, then</span>
<span class="sd">        kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should</span>
<span class="sd">        return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</span>

<span class="sd">        Args:</span>
<span class="sd">            response (WiseAgentMessage): the response message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message_type</span> <span class="o">!=</span> <span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Remove the agent from the required agents for this phase</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_agent_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

        <span class="c1"># If there are no more agents remaining in this phase, move on to the next phase,</span>
        <span class="c1"># return the final answer, or iterate</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">next_phase</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_agents_for_next_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">next_phase</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Determine the final answer</span>
                <span class="n">final_answer_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;What is the final answer for the original query? Provide the answer followed&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; by a confidence score from 0 to 100 to indicate how certain you are of the&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; answer. Format the response with just the answer first followed by just&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; the confidence score on the next line. For example:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; Your answer goes here.</span><span class="se">\n</span><span class="s2">&quot;</span>
                                       <span class="s2">&quot; 85</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                           <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">final_answer_prompt</span><span class="p">})</span>
                <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                <span class="n">final_answer_and_score</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
                <span class="n">final_answer</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                    <span class="n">score</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># A score could not be determined</span>
                    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

                <span class="c1"># Determine if we should return the final answer or iterate</span>
                <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence_score_threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">final_answer</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                        <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span>
                                                        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                       <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Rephrase the query and iterate</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                        <span class="n">rephrase_query_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;The final answer was not considered good enough to respond to the original query.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; The original query was: &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; Your task is to analyze the original query for its intent along with the conversation&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; history and final answer to rephrase the original query to yield a better final answer.&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; The response should contain only the rephrased query.&quot;</span>
                                                 <span class="s2">&quot; Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                                   <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">rephrase_query_prompt</span><span class="p">})</span>
                        <span class="c1"># Note that llm_chat_completion[chat_id] is being used here so we have the full history</span>
                        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                        <span class="n">rephrased_query</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">rephrased_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">rephrased_query</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                               <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                              <span class="n">agent</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Kick off the next phase</span>
                <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">next_phase</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_current_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                       <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the function to deliver the response to the client.</span>
<span class="sd">        Returns:</span>
<span class="sd">            (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the function to deliver the response to the client.</span>
<span class="sd">        Args:</span>
<span class="sd">            response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.confidence_score_threshold" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the confidence score threshold.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.max_iterations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the maximum number of iterations.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.phases" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">phases</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the list of phases.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.
Returns:
    (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span> <span class="n">confidence_score_threshold</span><span class="o">=</span><span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM to use for coordinating the collaboration</p>
              </div>
            </li>
            <li>
              <b><code>phases</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional list of phase names, defaults to "Data Collection" and "Data Analysis"</p>
              </div>
            </li>
            <li>
              <b><code>max_iterations</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><span title="wiseagents.agents.coordinator_wise_agents.MAX_ITERATIONS_FOR_COORDINATOR">MAX_ITERATIONS_FOR_COORDINATOR</span></code>
)
              –
              <div class="doc-md-description">
                <p>the maximum number of iterations to run the phases, defaults to 5</p>
              </div>
            </li>
            <li>
              <b><code>confidence_score_threshold</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><span title="wiseagents.agents.coordinator_wise_agents.CONFIDENCE_SCORE_THRESHOLD">CONFIDENCE_SCORE_THRESHOLD</span></code>
)
              –
              <div class="doc-md-description">
                <p>the confidence score threshold to determine if the final answer</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the coordinator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span>
             <span class="n">phases</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span>
             <span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        llm (WiseAgentLLM): the LLM to use for coordinating the collaboration</span>
<span class="sd">        phases (Optional[List[str]]): the optional list of phase names, defaults to &quot;Data Collection&quot; and &quot;Data Analysis&quot;</span>
<span class="sd">        max_iterations (Optional[int]): the maximum number of iterations to run the phases, defaults to 5</span>
<span class="sd">        confidence_score_threshold (Optional[int]): the confidence score threshold to determine if the final answer</span>
<span class="sd">        is acceptable, defaults to 85</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the coordinator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span> <span class="k">if</span> <span class="n">phases</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">confidence_score_threshold</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, phases=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="si">}</span><span class="s2">,max_iterations=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.handle_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by kicking off the collaboration in phases.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by kicking off the collaboration in phases.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_collaboration_type</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">WiseAgentCollaborationType</span><span class="o">.</span><span class="n">PHASED</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

    <span class="c1"># Determine the agents required to answer the query</span>
    <span class="n">agent_selection_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Given the following query and a description of the agents that are available,&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; determine all of the agents that could be required to solve the query.&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; Format the response as a space separated list of agent names and don&#39;t include &quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; Query: &quot;</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;Available agents:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_agent_names_and_descriptions</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_selection_prompt</span><span class="p">})</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="c1"># Assign the agents to phases</span>
    <span class="n">agent_assignment_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Assign each of the agents that will be required to solve the query to one of the following phases:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot;Assume that agents within a phase will be executed in parallel.&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot; Format the response as a space separated list of agents for each phase, where the first&quot;</span>
                               <span class="s2">&quot; line contains the list of agents for the first phase and second line contains the list of&quot;</span>
                               <span class="s2">&quot; agents for the second phase and so on. Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_assignment_prompt</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>     
    <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()]</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_agent_phase_assignments</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">phases</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="c1"># Kick off the first phase</span>
    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                           <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message. If this message is from the last agent remaining in the current phase, then
kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should
return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the response message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a response message. If this message is from the last agent remaining in the current phase, then</span>
<span class="sd">    kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should</span>
<span class="sd">    return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</span>

<span class="sd">    Args:</span>
<span class="sd">        response (WiseAgentMessage): the response message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message_type</span> <span class="o">!=</span> <span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Remove the agent from the required agents for this phase</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_agent_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

    <span class="c1"># If there are no more agents remaining in this phase, move on to the next phase,</span>
    <span class="c1"># return the final answer, or iterate</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">next_phase</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_agents_for_next_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_phase</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Determine the final answer</span>
            <span class="n">final_answer_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;What is the final answer for the original query? Provide the answer followed&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; by a confidence score from 0 to 100 to indicate how certain you are of the&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; answer. Format the response with just the answer first followed by just&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; the confidence score on the next line. For example:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; Your answer goes here.</span><span class="se">\n</span><span class="s2">&quot;</span>
                                   <span class="s2">&quot; 85</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                       <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">final_answer_prompt</span><span class="p">})</span>
            <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
            <span class="n">final_answer_and_score</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
            <span class="n">final_answer</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                <span class="n">score</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># A score could not be determined</span>
                <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c1"># Determine if we should return the final answer or iterate</span>
            <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence_score_threshold</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">final_answer</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                    <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span>
                                                    <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                   <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Rephrase the query and iterate</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                    <span class="n">rephrase_query_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;The final answer was not considered good enough to respond to the original query.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; The original query was: &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; Your task is to analyze the original query for its intent along with the conversation&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; history and final answer to rephrase the original query to yield a better final answer.&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; The response should contain only the rephrased query.&quot;</span>
                                             <span class="s2">&quot; Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                               <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">rephrase_query_prompt</span><span class="p">})</span>
                    <span class="c1"># Note that llm_chat_completion[chat_id] is being used here so we have the full history</span>
                    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                    <span class="n">rephrased_query</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">rephrased_query</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">rephrased_query</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                           <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                          <span class="n">agent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Kick off the next phase</span>
            <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">next_phase</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_current_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                   <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.
Args:
    response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the function to deliver the response to the client.</span>
<span class="sd">    Args:</span>
<span class="sd">        response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.PhasedCoordinatorWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.RAGWiseAgent" class="doc doc-heading">
            <code>RAGWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent makes use of retrieval augmented generation (RAG) to answer questions.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RAGWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent makes use of retrieval augmented generation (RAG) to answer questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.RAGWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">:</span> <span class="n">WiseAgentVectorDB</span><span class="p">,</span>
                 <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
                 <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">include_sources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span>
                 <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM to use for processing requests</span>
<span class="sd">            vector_db (WiseAgentVectorDB): the vector database to use for retrieving documents</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            collection_name Optional(str): the name of the collection within the vector database to use for</span>
<span class="sd">            retrieving documents, defaults to wise-agent-collection</span>
<span class="sd">            k Optional(int): the number of documents to retrieve for each query, defaults to 4</span>
<span class="sd">            include_sources Optional(bool): whether to include the sources of the documents that were consulted to</span>
<span class="sd">            produce the response, defaults to False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">include_sources</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
                         <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">, include_sources=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="si">}</span><span class="s2">), system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message using retrieval augmented generation (RAG).</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">            conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">            can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">            collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">            no string response yet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="n">retrieve_documents_for_rag</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
        <span class="n">llm_response_with_sources</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span>
                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">,</span>
                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">llm_response_with_sources</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">k</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the number of documents to retrieve for each query.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_k</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">include_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to include the sources of the documents that were consulted to produce the response.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.RAGWiseAgent.include_sources" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">include_sources</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get whether to include the sources of the documents that were consulted to produce the response.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.RAGWiseAgent.k" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">k</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the number of documents to retrieve for each query.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.RAGWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">include_sources</span><span class="o">=</span><span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>vector_db</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.vectordb.WiseAgentVectorDB" href="../vectordb/#wiseagents.vectordb.WiseAgentVectorDB">WiseAgentVectorDB</a></code>)
              –
              <div class="doc-md-description">
                <p>the vector database to use for retrieving documents</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>collection_name</code></b>
                  (<code>Optional(str</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_COLLECTION_NAME">DEFAULT_COLLECTION_NAME</a></code>
)
              –
              <div class="doc-md-description">
                <p>the name of the collection within the vector database to use for</p>
              </div>
            </li>
            <li>
              <b><code>k</code></b>
                  (<code>Optional(int</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_NUM_DOCUMENTS">DEFAULT_NUM_DOCUMENTS</a></code>
)
              –
              <div class="doc-md-description">
                <p>the number of documents to retrieve for each query, defaults to 4</p>
              </div>
            </li>
            <li>
              <b><code>include_sources</code></b>
                  (<code>Optional(bool</code>, default:
                      <code><a class="autorefs autorefs-internal" title="wiseagents.agents.rag_wise_agents.DEFAULT_INCLUDE_SOURCES" href="rag_wise_agents/#wiseagents.agents.rag_wise_agents.DEFAULT_INCLUDE_SOURCES">DEFAULT_INCLUDE_SOURCES</a></code>
)
              –
              <div class="doc-md-description">
                <p>whether to include the sources of the documents that were consulted to</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">vector_db</span><span class="p">:</span> <span class="n">WiseAgentVectorDB</span><span class="p">,</span>
             <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">collection_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span><span class="p">,</span>
             <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span><span class="p">,</span> <span class="n">include_sources</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span><span class="p">,</span>
             <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM to use for processing requests</span>
<span class="sd">        vector_db (WiseAgentVectorDB): the vector database to use for retrieving documents</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        collection_name Optional(str): the name of the collection within the vector database to use for</span>
<span class="sd">        retrieving documents, defaults to wise-agent-collection</span>
<span class="sd">        k Optional(int): the number of documents to retrieve for each query, defaults to 4</span>
<span class="sd">        include_sources Optional(bool): whether to include the sources of the documents that were consulted to</span>
<span class="sd">        produce the response, defaults to False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vector_db</span> <span class="o">=</span> <span class="n">vector_db</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">collection_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">k</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">include_sources</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
                     <span class="n">vector_db</span><span class="o">=</span><span class="n">vector_db</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the optional instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the optional instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_collection_name</span> <span class="o">=</span> <span class="n">DEFAULT_COLLECTION_NAME</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_k</span> <span class="o">=</span> <span class="n">DEFAULT_NUM_DOCUMENTS</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_include_sources</span> <span class="o">=</span> <span class="n">DEFAULT_INCLUDE_SOURCES</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;vector_db=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="si">}</span><span class="s2">, collection_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;k=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="si">}</span><span class="s2">, include_sources=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="si">}</span><span class="s2">), system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message using retrieval augmented generation (RAG).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
            <li>
              <b><code>conversation_history</code></b>
                  (<code><span title="typing.List">List</span>[<span title="openai.types.chat.ChatCompletionMessageParam">ChatCompletionMessageParam</span>]</code>)
              –
              <div class="doc-md-description">
                <p>The conversation history that</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>Optional[str]: the response to the request message as a string or None if there is</p>
              </div>
            </li>
            <li>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
              –
              <div class="doc-md-description">
                <p>no string response yet</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ChatCompletionMessageParam</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message using retrieval augmented generation (RAG).</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">        conversation_history (List[ChatCompletionMessageParam]): The conversation history that</span>
<span class="sd">        can be used while processing the request. If this agent isn&#39;t involved in a type of</span>
<span class="sd">        collaboration that makes use of the conversation history, this will be an empty list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: the response to the request message as a string or None if there is</span>
<span class="sd">        no string response yet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">retrieved_documents</span> <span class="o">=</span> <span class="n">retrieve_documents_for_rag</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
    <span class="n">llm_response_with_sources</span> <span class="o">=</span> <span class="n">create_and_process_rag_prompt</span><span class="p">(</span><span class="n">retrieved_documents</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span>
                                                              <span class="bp">self</span><span class="o">.</span><span class="n">include_sources</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">,</span>
                                                              <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">llm_response_with_sources</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.RAGWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/rag_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.SequentialCoordinatorWiseAgent" class="doc doc-heading">
            <code>SequentialCoordinatorWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent will coordinate the execution of a sequence of agents.
Use Stomp protocol.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SequentialCoordinatorWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent will coordinate the execution of a sequence of agents.</span>
<span class="sd">    Use Stomp protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.SequentialCoordinatorWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            agents (List[str]): the list of agents to coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span> <span class="o">=</span> <span class="n">agents</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, agents=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the first agent in the sequence.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_collaboration_type</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">WiseAgentCollaborationType</span><span class="o">.</span><span class="n">SEQUENTIAL</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_agents_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                           <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a response message by passing it to the next agent in the sequence.</span>

<span class="sd">        Args:</span>
<span class="sd">            response (WiseAgentMessage): the response message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">agents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of agents.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the function to deliver the response to the client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the function to deliver the response to the client.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.agents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the list of agents.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Callable">Callable</span>[[], <a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a>]</code>
              –
              <div class="doc-md-description">
                <p>the function to deliver the response to the client</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">agents</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>agents</code></b>
                  (<code><span title="typing.List">List</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>the list of agents to coordinate</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        agents (List[str]): the list of agents to coordinate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span> <span class="o">=</span> <span class="n">agents</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, agents=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.handle_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the first agent in the sequence.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the first agent in the sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_collaboration_type</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">WiseAgentCollaborationType</span><span class="o">.</span><span class="n">SEQUENTIAL</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_agents_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                       <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message by passing it to the next agent in the sequence.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the response message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a response message by passing it to the next agent in the sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        response (WiseAgentMessage): the response message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the function to deliver the response to the client.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.SequentialCoordinatorWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/coordinator_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../" class="btn btn-neutral float-left" title="wiseagents"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="assistant/" class="btn btn-neutral float-right" title="assistant">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="assistant/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
