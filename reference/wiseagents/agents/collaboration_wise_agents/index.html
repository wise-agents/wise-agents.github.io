<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>collaboration_wise_agents - wise-agents Docs</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "collaboration_wise_agents";
        var mkdocs_page_input_path = "reference/wiseagents/agents/collaboration_wise_agents.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> wise-agents Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../multi_agents/">What are AI Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../wise_agents_architecture/">Wise Agents architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../contributing/">How to contribute</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Details</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../rag_architecture/">RAG Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../using_cli/">Using CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../declare_agents/">Declare agents in YAML</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../example_1/">Example 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../example_2/">Example 2</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="../../">wiseagents</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="../">agents</a>
    <ul class="current">
                <li class="toctree-l3 current"><a class="reference internal current" href="#">collaboration_wise_agents</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../rag_wise_agents/">rag_wise_agents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../utility_wise_agents/">utility_wise_agents</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../cli/">cli</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../cli/wise_agent_cli/">wise_agent_cli</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constants/">constants</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../core/">core</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../graphdb/">graphdb</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../graphdb/lang_chain_wise_agent_graph_db/">lang_chain_wise_agent_graph_db</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../graphdb/wise_agent_graph_db/">wise_agent_graph_db</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../llm/">llm</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../llm/openai_API_wise_agent_LLM/">openai_API_wise_agent_LLM</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../llm/wise_agent_LLM/">wise_agent_LLM</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../llm/wise_agent_remote_LLM/">wise_agent_remote_LLM</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../transports/">transports</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../transports/stomp/">stomp</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../vectordb/">vectordb</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../vectordb/lang_chain_wise_agent_vector_db/">lang_chain_wise_agent_vector_db</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../vectordb/wise_agent_vector_db/">wise_agent_vector_db</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../wise_agent_messaging/">wise_agent_messaging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../yaml_env/">yaml_env</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../yaml_env/yaml_utils/">yaml_utils</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../community/">Community</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../contributing/">How to contribute</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../security/">Security</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">wise-agents Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Reference</li>
          <li class="breadcrumb-item"><a href="../../">wiseagents</a></li>
          <li class="breadcrumb-item"><a href="../">agents</a></li>
      <li class="breadcrumb-item active">collaboration_wise_agents</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">



<a id="wiseagents.agents.collaboration_wise_agents"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent" class="doc doc-heading">
            <code>CollaboratorWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent implementation is meant to be used in conjunction with a CoordinatorWiseAgent.
A collaborator agent will receive a request from a coordinator agent and will process the
request, adding its response to the shared context. The collaborator agent will then send
the coordinator agent a message to let the coordinator know that it has finished executing
its work.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CollaboratorWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent implementation is meant to be used in conjunction with a CoordinatorWiseAgent.</span>
<span class="sd">    A collaborator agent will receive a request from a coordinator agent and will process the</span>
<span class="sd">    request, adding its response to the shared context. The collaborator agent will then send</span>
<span class="sd">    the coordinator agent a message to let the coordinator know that it has finished executing</span>
<span class="sd">    its work.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.CollaboratorWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
                 <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_llm</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the LLM and then send a response back to the sender</span>
<span class="sd">        to let them know the request has been processed.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">chat_id</span>
        <span class="k">if</span> <span class="n">chat_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Get the chat messages so far</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Add this agent&#39;s response to the shared context</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="c1"># Let the sender know that this agent has finished processing the request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span>
            <span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                             <span class="n">chat_id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the agent to send the message to.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (WiseAgentMessage): the message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM agent to use for processing requests</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the collaborator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span>
             <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        llm (WiseAgentLLM): the LLM agent to use for processing requests</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the collaborator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_llm</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.get_recipient_agent_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_recipient_agent_name</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return the name of the agent to send the message to.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>message</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the name of the agent to send the message to.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (WiseAgentMessage): the message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the LLM and then send a response back to the sender
to let them know the request has been processed.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the LLM and then send a response back to the sender</span>
<span class="sd">    to let them know the request has been processed.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">chat_id</span>
    <span class="k">if</span> <span class="n">chat_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Get the chat messages so far</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="p">[])</span>

    <span class="c1"># Add this agent&#39;s response to the shared context</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="c1"># Let the sender know that this agent has finished processing the request</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span>
        <span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                         <span class="n">chat_id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.CollaboratorWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">WiseAgentMessage</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent" class="doc doc-heading">
            <code>PhasedCoordinatorWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent will coordinate the execution of a group of agents in order to determine the response
to a query. The agents will be executed in phases, where agents within a phase will be executed
in parallel. After the phases have completed, the coordinator may choose to repeat the phases
until it is satisfied with the final response or determines it's not possible to answer the query.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PhasedCoordinatorWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent will coordinate the execution of a group of agents in order to determine the response</span>
<span class="sd">    to a query. The agents will be executed in phases, where agents within a phase will be executed</span>
<span class="sd">    in parallel. After the phases have completed, the coordinator may choose to repeat the phases</span>
<span class="sd">    until it is satisfied with the final response or determines it&#39;s not possible to answer the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.PhasedCoordinatorWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span>
                 <span class="n">phases</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span>
                 <span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            llm (WiseAgentLLM): the LLM to use for coordinating the collaboration</span>
<span class="sd">            phases (Optional[List[str]]): the optional list of phase names, defaults to &quot;Data Collection&quot; and &quot;Data Analysis&quot;</span>
<span class="sd">            max_iterations (Optional[int]): the maximum number of iterations to run the phases, defaults to 5</span>
<span class="sd">            confidence_score_threshold (Optional[int]): the confidence score threshold to determine if the final answer</span>
<span class="sd">            is acceptable, defaults to 85</span>
<span class="sd">            system_message (Optional[str]): the optional system message to be used by the coordinator when processing</span>
<span class="sd">            chat completions using its LLM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span> <span class="k">if</span> <span class="n">phases</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">confidence_score_threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, phases=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="si">}</span><span class="s2">,max_iterations=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">phases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of phases.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_iterations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the maximum number of iterations.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">confidence_score_threshold</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the confidence score threshold.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by kicking off the collaboration in phases.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

        <span class="c1"># Determine the agents required to answer the query</span>
        <span class="n">agent_selection_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Given the following query and a description of the agents that are available,&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; determine all of the agents that could be required to solve the query.&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; Format the response as a space separated list of agent names and don&#39;t include &quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot; Query: &quot;</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;Available agents:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_agent_names_and_descriptions</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_selection_prompt</span><span class="p">})</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="c1"># Assign the agents to phases</span>
        <span class="n">agent_assignment_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Assign each of the agents that will be required to solve the query to one of the following phases:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot;Assume that agents within a phase will be executed in parallel.&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; Format the response as a space separated list of agents for each phase, where the first&quot;</span>
                                   <span class="s2">&quot; line contains the list of agents for the first phase and second line contains the list of&quot;</span>
                                   <span class="s2">&quot; agents for the second phase and so on. Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_assignment_prompt</span><span class="p">})</span>
        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>     
        <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()]</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_agent_phase_assignments</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">phases</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

        <span class="c1"># Kick off the first phase</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                               <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a response message. If this message is from the last agent remaining in the current phase, then</span>
<span class="sd">        kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should</span>
<span class="sd">        return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</span>

<span class="sd">        Args:</span>
<span class="sd">            response (WiseAgentMessage): the response message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message_type</span> <span class="o">!=</span> <span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Remove the agent from the required agents for this phase</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_agent_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

        <span class="c1"># If there are no more agents remaining in this phase, move on to the next phase,</span>
        <span class="c1"># return the final answer, or iterate</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">next_phase</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_agents_for_next_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">next_phase</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Determine the final answer</span>
                <span class="n">final_answer_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;What is the final answer for the original query? Provide the answer followed&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; by a confidence score from 0 to 100 to indicate how certain you are of the&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; answer. Format the response with just the answer first followed by just&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; the confidence score on the next line. For example:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot; Your answer goes here.</span><span class="se">\n</span><span class="s2">&quot;</span>
                                       <span class="s2">&quot; 85</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                           <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">final_answer_prompt</span><span class="p">})</span>
                <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                <span class="n">final_answer_and_score</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
                <span class="n">final_answer</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                    <span class="n">score</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># A score could not be determined</span>
                    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

                <span class="c1"># Determine if we should return the final answer or iterate</span>
                <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence_score_threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">final_answer</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                        <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span>
                                                        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                       <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Rephrase the query and iterate</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                        <span class="n">rephrase_query_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;The final answer was not considered good enough to respond to the original query.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; The original query was: &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; Your task is to analyze the original query for its intent along with the conversation&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; history and final answer to rephrase the original query to yield a better final answer.&quot;</span> <span class="o">+</span>
                                                 <span class="s2">&quot; The response should contain only the rephrased query.&quot;</span>
                                                 <span class="s2">&quot; Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                                   <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">rephrase_query_prompt</span><span class="p">})</span>
                        <span class="c1"># Note that llm_chat_completion[chat_id] is being used here so we have the full history</span>
                        <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                        <span class="n">rephrased_query</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">rephrased_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">rephrased_query</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                               <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                              <span class="n">agent</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Kick off the next phase</span>
                <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">next_phase</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_current_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                       <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the agent to send the message to.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (WiseAgentMessage): the message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the function to deliver the response to the client.</span>
<span class="sd">        Returns:</span>
<span class="sd">            (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the function to deliver the response to the client.</span>
<span class="sd">        Args:</span>
<span class="sd">            response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.confidence_score_threshold" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the confidence score threshold.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.max_iterations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the maximum number of iterations.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.phases" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">phases</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the list of phases.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.
Returns:
    (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="p">,</span> <span class="n">phases</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span> <span class="n">confidence_score_threshold</span><span class="o">=</span><span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>llm</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.llm.WiseAgentLLM" href="../../llm/#wiseagents.llm.WiseAgentLLM">WiseAgentLLM</a></code>)
              –
              <div class="doc-md-description">
                <p>the LLM to use for coordinating the collaboration</p>
              </div>
            </li>
            <li>
              <b><code>phases</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional list of phase names, defaults to "Data Collection" and "Data Analysis"</p>
              </div>
            </li>
            <li>
              <b><code>max_iterations</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><span title="wiseagents.agents.collaboration_wise_agents.MAX_ITERATIONS_FOR_COORDINATOR">MAX_ITERATIONS_FOR_COORDINATOR</span></code>
)
              –
              <div class="doc-md-description">
                <p>the maximum number of iterations to run the phases, defaults to 5</p>
              </div>
            </li>
            <li>
              <b><code>confidence_score_threshold</code></b>
                  (<code><span title="typing.Optional">Optional</span>[int]</code>, default:
                      <code><span title="wiseagents.agents.collaboration_wise_agents.CONFIDENCE_SCORE_THRESHOLD">CONFIDENCE_SCORE_THRESHOLD</span></code>
)
              –
              <div class="doc-md-description">
                <p>the confidence score threshold to determine if the final answer</p>
              </div>
            </li>
            <li>
              <b><code>system_message</code></b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>the optional system message to be used by the coordinator when processing</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">llm</span><span class="p">:</span> <span class="n">WiseAgentLLM</span><span class="p">,</span>
             <span class="n">phases</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_iterations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span><span class="p">,</span>
             <span class="n">confidence_score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span><span class="p">,</span> <span class="n">system_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        llm (WiseAgentLLM): the LLM to use for coordinating the collaboration</span>
<span class="sd">        phases (Optional[List[str]]): the optional list of phase names, defaults to &quot;Data Collection&quot; and &quot;Data Analysis&quot;</span>
<span class="sd">        max_iterations (Optional[int]): the maximum number of iterations to run the phases, defaults to 5</span>
<span class="sd">        confidence_score_threshold (Optional[int]): the confidence score threshold to determine if the final answer</span>
<span class="sd">        is acceptable, defaults to 85</span>
<span class="sd">        system_message (Optional[str]): the optional system message to be used by the coordinator when processing</span>
<span class="sd">        chat completions using its LLM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span> <span class="k">if</span> <span class="n">phases</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">max_iterations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">confidence_score_threshold</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="n">system_message</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span> <span class="n">system_message</span><span class="o">=</span><span class="n">system_message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Create a new instance of the class, setting default values for the instance variables.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new instance of the class, setting default values for the instance variables.&quot;&quot;&quot;</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Data Collection&quot;</span><span class="p">,</span> <span class="s2">&quot;Data Analysis&quot;</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_max_iterations</span> <span class="o">=</span> <span class="n">MAX_ITERATIONS_FOR_COORDINATOR</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_confidence_score_threshold</span> <span class="o">=</span> <span class="n">CONFIDENCE_SCORE_THRESHOLD</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_system_message</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, transport=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;llm=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="si">}</span><span class="s2">, phases=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="si">}</span><span class="s2">,max_iterations=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="si">}</span><span class="s2">, system_message=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">system_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.get_recipient_agent_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_recipient_agent_name</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return the name of the agent to send the message to.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>message</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the name of the agent to send the message to.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (WiseAgentMessage): the message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by kicking off the collaboration in phases.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by kicking off the collaboration in phases.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

    <span class="c1"># Determine the agents required to answer the query</span>
    <span class="n">agent_selection_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Given the following query and a description of the agents that are available,&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; determine all of the agents that could be required to solve the query.&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; Format the response as a space separated list of agent names and don&#39;t include &quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot; Query: &quot;</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;Available agents:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                              <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_agent_names_and_descriptions</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_message</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">system_message</span><span class="p">})</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_selection_prompt</span><span class="p">})</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;messages: </span><span class="si">{</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="c1"># Assign the agents to phases</span>
    <span class="n">agent_assignment_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Assign each of the agents that will be required to solve the query to one of the following phases:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot;Assume that agents within a phase will be executed in parallel.&quot;</span> <span class="o">+</span>
                               <span class="s2">&quot; Format the response as a space separated list of agents for each phase, where the first&quot;</span>
                               <span class="s2">&quot; line contains the list of agents for the first phase and second line contains the list of&quot;</span>
                               <span class="s2">&quot; agents for the second phase and so on. Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">agent_assignment_prompt</span><span class="p">})</span>
    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>     
    <span class="n">phases</span> <span class="o">=</span> <span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()]</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_agent_phase_assignments</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">phases</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="c1"># Kick off the first phase</span>
    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                           <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message. If this message is from the last agent remaining in the current phase, then
kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should
return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the response message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a response message. If this message is from the last agent remaining in the current phase, then</span>
<span class="sd">    kick off the next phase of collaboration if there are more phases. Otherwise, determine if we should</span>
<span class="sd">    return the final answer or if we need to go back to the first phase and repeat with a rephrased query.</span>

<span class="sd">    Args:</span>
<span class="sd">        response (WiseAgentMessage): the response message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">message_type</span> <span class="o">!=</span> <span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">ACK</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected response message: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Remove the agent from the required agents for this phase</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">remove_required_agent_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>

    <span class="c1"># If there are no more agents remaining in this phase, move on to the next phase,</span>
    <span class="c1"># return the final answer, or iterate</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">next_phase</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_agents_for_next_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_phase</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Determine the final answer</span>
            <span class="n">final_answer_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;What is the final answer for the original query? Provide the answer followed&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; by a confidence score from 0 to 100 to indicate how certain you are of the&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; answer. Format the response with just the answer first followed by just&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; the confidence score on the next line. For example:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                   <span class="s2">&quot; Your answer goes here.</span><span class="se">\n</span><span class="s2">&quot;</span>
                                   <span class="s2">&quot; 85</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                       <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">final_answer_prompt</span><span class="p">})</span>
            <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
            <span class="n">final_answer_and_score</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
            <span class="n">final_answer</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                <span class="n">score</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">final_answer_and_score</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># A score could not be determined</span>
                <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="c1"># Determine if we should return the final answer or iterate</span>
            <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence_score_threshold</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">final_answer</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                    <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span> <span class="n">message_type</span><span class="o">=</span><span class="n">WiseAgentMessageType</span><span class="o">.</span><span class="n">CANNOT_ANSWER</span><span class="p">,</span>
                                                    <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                   <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Rephrase the query and iterate</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_iterations</span><span class="p">:</span>
                    <span class="n">rephrase_query_prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;The final answer was not considered good enough to respond to the original query.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; The original query was: &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_queries</span><span class="p">(</span><span class="n">chat_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; Your task is to analyze the original query for its intent along with the conversation&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; history and final answer to rephrase the original query to yield a better final answer.&quot;</span> <span class="o">+</span>
                                             <span class="s2">&quot; The response should contain only the rephrased query.&quot;</span>
                                             <span class="s2">&quot; Don&#39;t include anything else in the response.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span>
                                               <span class="n">messages</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">rephrase_query_prompt</span><span class="p">})</span>
                    <span class="c1"># Note that llm_chat_completion[chat_id] is being used here so we have the full history</span>
                    <span class="n">llm_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">process_chat_completion</span><span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">llm_chat_completion</span><span class="p">[</span><span class="n">chat_id</span><span class="p">],</span> <span class="n">tools</span><span class="o">=</span><span class="p">[])</span>
                    <span class="n">rephrased_query</span> <span class="o">=</span> <span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">append_chat_completion</span><span class="p">(</span><span class="n">chat_uuid</span><span class="o">=</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">llm_response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">set_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">ctx</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">rephrased_query</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_required_agents_for_current_phase</span><span class="p">(</span><span class="n">chat_id</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">rephrased_query</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                           <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span>
                                          <span class="n">agent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Kick off the next phase</span>
            <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">next_phase</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">ctx</span><span class="o">.</span><span class="n">get_current_query</span><span class="p">(</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                   <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span> <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">agent</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.
Args:
    response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the function to deliver the response to the client.</span>
<span class="sd">    Args:</span>
<span class="sd">        response_delivery (Callable[[], WiseAgentMessage]): the function to deliver the response to the</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.PhasedCoordinatorWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent" class="doc doc-heading">
            <code>SequentialCoordinatorWiseAgent</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgent" href="../../#wiseagents.WiseAgent">WiseAgent</a></code></p>


        <p>This agent will coordinate the execution of a sequence of agents.
Use Stomp protocol.</p>

              <details class="quote">
                <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SequentialCoordinatorWiseAgent</span><span class="p">(</span><span class="n">WiseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This agent will coordinate the execution of a sequence of agents.</span>
<span class="sd">    Use Stomp protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">yaml_tag</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;!wiseagents.agents.SequentialCoordinatorWiseAgent&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): the name of the agent</span>
<span class="sd">            description (str): a description of the agent</span>
<span class="sd">            transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">            agents (List[str]): the list of agents to coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span> <span class="o">=</span> <span class="n">agents</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, agents=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a request message by passing it to the first agent in the sequence.</span>

<span class="sd">        Args:</span>
<span class="sd">            request (WiseAgentMessage): the request message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_agents_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                           <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process a response message by passing it to the next agent in the sequence.</span>

<span class="sd">        Args:</span>
<span class="sd">            response (WiseAgentMessage): the response message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
        <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>
        <span class="n">next_agent</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_next_agent_in_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_agent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator sending response from &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">),</span>
                               <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator sending response from &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="n">next_agent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                               <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">next_agent</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the agent to send the message to.</span>

<span class="sd">        Args:</span>
<span class="sd">            message (WiseAgentMessage): the message to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">agents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of agents.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the function to deliver the response to the client.</span>

<span class="sd">        Returns:</span>
<span class="sd">            (Callable[[], WiseAgentMessage]): the function to deliver the response to the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span>

    <span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the function to deliver the response to the client.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.agents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the list of agents.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the name of the agent.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">response_delivery</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get the function to deliver the response to the client.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.Callable">Callable</span>[[], <a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a>]</code>
              –
              <div class="doc-md-description">
                <p>the function to deliver the response to the client</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">agents</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the agent.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the name of the agent</p>
              </div>
            </li>
            <li>
              <b><code>description</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>a description of the agent</p>
              </div>
            </li>
            <li>
              <b><code>transport</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentTransport" href="../../#wiseagents.WiseAgentTransport">WiseAgentTransport</a></code>)
              –
              <div class="doc-md-description">
                <p>the transport to use for communication</p>
              </div>
            </li>
            <li>
              <b><code>agents</code></b>
                  (<code><span title="typing.List">List</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>the list of agents to coordinate</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">transport</span><span class="p">:</span> <span class="n">WiseAgentTransport</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): the name of the agent</span>
<span class="sd">        description (str): a description of the agent</span>
<span class="sd">        transport (WiseAgentTransport): the transport to use for communication</span>
<span class="sd">        agents (List[str]): the list of agents to coordinate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span> <span class="o">=</span> <span class="n">agents</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.__repr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return a string representation of the agent.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">, agents=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.get_recipient_agent_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_recipient_agent_name</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return the name of the agent to send the message to.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>message</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recipient_agent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the name of the agent to send the message to.</span>

<span class="sd">    Args:</span>
<span class="sd">        message (WiseAgentMessage): the message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.process_error" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Log the error and return True.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the error and return True.&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.process_event" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.process_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a request message by passing it to the first agent in the sequence.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>request</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the request message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a request message by passing it to the first agent in the sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (WiseAgentMessage): the request message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator received request: </span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate a chat ID that will be used to collaborate on this query</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_agents_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">set_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                       <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.process_response" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">process_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Process a response message by passing it to the next agent in the sequence.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>response</code></b>
                  (<code><a class="autorefs autorefs-internal" title="wiseagents.WiseAgentMessage" href="../../#wiseagents.WiseAgentMessage">WiseAgentMessage</a></code>)
              –
              <div class="doc-md-description">
                <p>the response message to process</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a response message by passing it to the next agent in the sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        response (WiseAgentMessage): the response message to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">WiseAgentRegistry</span><span class="o">.</span><span class="n">get_or_create_context</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">)</span>
    <span class="n">chat_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">chat_id</span>
    <span class="n">next_agent</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_next_agent_in_sequence</span><span class="p">(</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">next_agent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator sending response from &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">),</span>
                           <span class="n">ctx</span><span class="o">.</span><span class="n">get_route_response_to</span><span class="p">(</span><span class="n">chat_id</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sequential coordinator sending response from &quot;</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">sender</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="n">next_agent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">WiseAgentMessage</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context_name</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="n">context_name</span><span class="p">,</span>
                                           <span class="n">chat_id</span><span class="o">=</span><span class="n">chat_id</span><span class="p">),</span> <span class="n">next_agent</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.set_response_delivery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_response_delivery</span><span class="p">(</span><span class="n">response_delivery</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the function to deliver the response to the client.</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_response_delivery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_delivery</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">WiseAgentMessage</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the function to deliver the response to the client.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_response_delivery</span> <span class="o">=</span> <span class="n">response_delivery</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="wiseagents.agents.collaboration_wise_agents.SequentialCoordinatorWiseAgent.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Do nothing</p>

            <details class="quote">
              <summary>Source code in <code>wiseagents/agents/collaboration_wise_agents.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../" class="btn btn-neutral float-left" title="agents"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../rag_wise_agents/" class="btn btn-neutral float-right" title="rag_wise_agents">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../rag_wise_agents/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
